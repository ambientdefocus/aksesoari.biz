(function(a){function d(a){if(window.console&&window.console.log)window.console.log(a)}function c(b){this.isOpen=false;this.customLayer=a('<div id="customLayer">');if(b.content){this.set("content",b.content);a(b.content).show();this.customLayer.append(b.content)}}var b=[];a.extend(c.prototype,new google.maps.OverlayView,{toggle:function(a){if(this.isOpen){this.close()}else{this.open(a)}},open:function(c){a(b).each(function(){this.isOpen=false});if(c.marker){this.set("marker",c.marker);this.bindTo("anchorPoint",this.marker);this.bindTo("position",this.marker)}this.setValues(c);this.isOpen=true},close:function(){a("#customLayer").remove();this.isOpen=false},onAdd:function(){a("#customLayer").remove();var b=a(this.getPanes().floatPane);b.append(this.customLayer)},onRemove:function(){a("#customLayer").remove()},draw:function(){var a=this.getProjection();if(!a){return}var b=this.get("position");if(!b){this.close();return}var c=this.content.offsetHeight;var d=a.fromLatLngToDivPixel(b);var e=d.y-c-this.iconHeight-this.arrowHeight;var f=d.x-this.arrowLeft-this.arrowWidth/2;this.content.style["top"]=this.px(e);this.content.style["left"]=this.px(f)},anchorPoint_changed:function(){this.draw()},position_changed:function(){this.draw()},px:function(a){if(a){return a+"px"}return a}});a.fn.infowindow=function(d){var e=a.extend({},a.fn.infowindow.defaults,d);return this.each(function(){e.content=a(this).clone()[0];var d=new c(e);b.push(d);if(e.showOn){google.maps.event.addListener(e.marker,e.showOn,function(){d.toggle(e)})}})};a.fn.infowindow.defaults={iconHeight:34,arrowHeight:0,arrowWidth:0,arrowLeft:0,showOn:"click"};})(jQuery)